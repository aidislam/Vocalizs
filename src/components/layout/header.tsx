
'use client';

import Link from 'next/link';
import { useRouter } from 'next/navigation';
import { LogOut, User as UserIcon } from 'lucide-react';
import Image from 'next/image';

import { useAuth, useUser } from '@/firebase';
import { Button } from '@/components/ui/button';
import { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from '@/components/ui/dropdown-menu';
import { Skeleton } from '@/components/ui/skeleton';
import { useToast } from '@/hooks/use-toast';

export function Header() {
  const { user, isUserLoading } = useUser();
  const auth = useAuth();
  const router = useRouter();
  const { toast } = useToast();

  const handleLogout = async () => {
    if (!auth) {
      toast({
        variant: 'destructive',
        title: 'Logout Failed',
        description: 'Auth service not ready.',
      });
      return;
    }
    try {
      await auth.signOut();
      toast({
        title: 'Logged Out',
        description: 'You have been successfully logged out.',
      });
      router.push('/login');
    } catch (error) {
      toast({
        variant: 'destructive',
        title: 'Logout Failed',
        description: 'An error occurred while logging out.',
      });
    }
  };

  return (
    <header className="sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60">
      <div className="container flex h-14 items-center">
        <div className="mr-4 hidden md:flex">
          <Link href="/" className="mr-6 flex items-center space-x-2">
            <Image
              src="data:image/png;base64,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IKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAYWAIKAIKAIKAIKAIKAYWAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIKAIK-HIYAAAAASUVORK5CYII="
              alt="Vocalize Logo"
              width={128}
              height={32}
              className="h-8 w-auto"
            />
          </Link>
        </div>

        <div className="flex flex-1 items-center justify-end space-x-2">
          {isUserLoading ? (
            <Skeleton className="h-8 w-8 rounded-full" />
          ) : user ? (
            <DropdownMenu>
              <DropdownMenuTrigger asChild>
                <Button
                  variant="ghost"
                  className="relative h-8 w-8 rounded-full"
                >
                  <Avatar className="h-8 w-8">
                    <AvatarImage
                      src={user.photoURL ?? undefined}
                      alt={user.displayName ?? 'User'}
                    />
                    <AvatarFallback>
                      {user.email?.charAt(0).toUpperCase() ?? <UserIcon />}
                    </AvatarFallback>
                  </Avatar>
                </Button>
              </DropdownMenuTrigger>
              <DropdownMenuContent className="w-56" align="end" forceMount>
                <DropdownMenuLabel className="font-normal">
                  <div className="flex flex-col space-y-1">
                    <p className="text-sm font-medium leading-none">
                      {user.displayName ?? 'User'}
                    </p>
                    <p className="text-xs leading-none text-muted-foreground">
                      {user.email}
                    </p>
                  </div>
                </DropdownMenuLabel>
                <DropdownMenuSeparator />
                <DropdownMenuItem onClick={handleLogout}>
                  <LogOut className="mr-2 h-4 w-4" />
                  <span>Log out</span>
                </DropdownMenuItem>
              </DropdownMenuContent>
            </DropdownMenu>
          ) : (
            <Button asChild>
              <Link href="/login">Login</Link>
            </Button>
          )}
        </div>
      </div>
    </header>
  );
}
